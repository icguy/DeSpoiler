{"version":3,"sources":["./src/app/pages/item-detail/item-detail.component.ts","./src/app/pages/item-detail/item-detail.component.html","./src/environments/environment.ts","./src/app/shared/auth.guard.ts","./src/app/pages/login/login.component.ts","./src/app/pages/login/login.component.html","./src/app/pages/item-detail/item-detail-form.ts","./src/app/pages/item-list/item-list.component.ts","./src/app/pages/item-list/item-list.component.html","./src/app/shared/auth.service.ts","./src/app/app.component.html","./src/app/app.component.ts","./src/app/shared/db.service.ts","./src/app/shared/icon.service.ts","./src/app/app.module.ts","./src/app/shared/busy.service.ts","./src/app/shared/base.component.ts","./src/app/app-routing.module.ts","./src/app/shared/storage-keys.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { AngularFireObject } from \"@angular/fire/database\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport * as dayjs from \"dayjs\";\nimport { of } from \"rxjs\";\nimport { filter, map, switchMap } from \"rxjs/operators\";\nimport { BaseComponent } from \"../../shared/base.component\";\nimport { BusyService } from \"../../shared/busy.service\";\nimport { DbService, FoodItem } from \"../../shared/db.service\";\nimport { IconService } from \"../../shared/icon.service\";\nimport { ItemDetailForm } from \"./item-detail-form\";\n\ninterface ItemDetail {\n\tisActive: boolean;\n\tadded: string;\n}\n\n@Component({\n\ttemplateUrl: \"./item-detail.component.html\",\n\tstyleUrls: [\"./item-detail.component.scss\"]\n})\nexport class ItemDetailComponent extends BaseComponent implements OnInit, OnDestroy {\n\n\tprivate ref: AngularFireObject<FoodItem> | undefined;\n\tpublic form: ItemDetailForm = new ItemDetailForm();\n\tpublic itemData: ItemDetail | undefined;\n\tpublic expiresInDaysView = true;\n\n\tconstructor(\n\t\tprivate route: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate busy: BusyService,\n\t\tpublic icons: IconService,\n\t\tprivate db: DbService\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic ngOnInit(): void {\n\t\tthis.subscriptions.push(\n\t\t\tthis.route.queryParams.pipe(\n\t\t\t\tswitchMap(params => {\n\t\t\t\t\tlet key = params[\"key\"];\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\treturn of(undefined);\n\t\t\t\t\t}\n\t\t\t\t\tthis.ref = this.db.getItem(key);\n\t\t\t\t\treturn this.ref.valueChanges();\n\t\t\t\t}),\n\t\t\t\tfilter(item => !!item),\n\t\t\t\tmap(a => a!)\n\t\t\t)\n\t\t\t\t.subscribe(item => {\n\t\t\t\t\tthis.itemData = {\n\t\t\t\t\t\tisActive: item.isActive,\n\t\t\t\t\t\tadded: dayjs(item.added).format(\"YYYY. MM. DD.\")\n\t\t\t\t\t};\n\t\t\t\t\tthis.form.setData({\n\t\t\t\t\t\texpires: item.expires,\n\t\t\t\t\t\tname: item.name\n\t\t\t\t\t});\n\t\t\t\t\tthis.form.markAsPristine();\n\t\t\t\t})\n\t\t);\n\t}\n\n\tpublic ngOnDestroy(): void {\n\t\tsuper.ngOnDestroy();\n\t\tthis.form.destroy();\n\t}\n\n\tpublic toggleExpiresInDaysView(): void {\n\t\tthis.expiresInDaysView = !this.expiresInDaysView;\n\t}\n\n\tpublic async reactivate(): Promise<void> {\n\t\tif (this.ref) {\n\t\t\tawait this.busy.do(() => this.ref!.update({ isActive: true }));\n\t\t}\n\t}\n\n\tpublic back(): void {\n\t\tthis.router.navigateByUrl(\"list\");\n\t}\n\n\tpublic async deleteItem(): Promise<void> {\n\t\tif (this.ref) {\n\t\t\tawait this.busy.do(() => this.ref!.remove());\n\t\t\tthis.router.navigateByUrl(\"list\");\n\t\t}\n\t}\n\n\tpublic async save(): Promise<void> {\n\t\tif (this.form.invalid) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet formData = this.form.getData();\n\t\tif (this.ref) {\n\t\t\tawait this.busy.do(() => this.ref!.update({\n\t\t\t\tname: formData.name,\n\t\t\t\texpires: formData.expires\n\t\t\t}));\n\t\t}\n\t\telse {\n\t\t\tawait this.busy.do(() => this.db.createItem({\n\t\t\t\tname: formData.name,\n\t\t\t\tadded: dayjs().format(\"YYYY-MM-DD\"),\n\t\t\t\texpires: formData.expires,\n\t\t\t\tisActive: true,\n\t\t\t}));\n\t\t}\n\n\t\tthis.router.navigate([\"/\", \"list\"]);\n\t}\n\n\tpublic async completeButtonClicked(): Promise<void> {\n\t\tif (this.ref) {\n\t\t\tawait this.busy.do(() => this.ref!.update({\n\t\t\t\tisActive: false\n\t\t\t}));\n\t\t}\n\t}\n}","<div class=\"page-wrapper\">\n\t<div class=\"page-header\">\n\t\t<button class=\"btn mod-btn-icon\" (click)=\"back()\">\n\t\t\t<fa-icon [icon]=\"icons.back\"></fa-icon>\n\t\t</button>\n\t\t<button class=\"btn mod-btn-icon add-icon\" *ngIf=\"form.dirty\" (click)=\"save()\">\n\t\t\t<fa-icon [icon]=\"icons.save\"></fa-icon>\n\t\t</button>\n\t</div>\n\n\t<div class=\"page-content\">\n\t\t<form (ngSubmit)=\"save()\">\n\t\t\t<div class=\"text-input\">\n\t\t\t\t<label>Name</label>\n\t\t\t\t<input [formControl]=\"form.name\" />\n\t\t\t</div>\n\t\t\t<div *ngIf=\"expiresInDaysView\" class=\"text-input\">\n\t\t\t\t<label>Expires in</label>\n\t\t\t\t<input type=\"number\" [formControl]=\"form.expiresInDays\" />\n\t\t\t\t<span class=\"days-suffix\">days</span>\n\t\t\t\t<button type=\"button\" class=\"btn mod-btn-icon add-icon\" (click)=\"toggleExpiresInDaysView()\">\n\t\t\t\t\t<fa-icon [icon]=\"icons.swap\"></fa-icon>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div *ngIf=\"!expiresInDaysView\" class=\"text-input\">\n\t\t\t\t<label>Expires on</label>\n\t\t\t\t<input type=\"date\" [formControl]=\"form.expiresDate\" />\n\t\t\t\t<button type=\"button\" class=\"btn mod-btn-icon add-icon\" (click)=\"toggleExpiresInDaysView()\">\n\t\t\t\t\t<fa-icon [icon]=\"icons.swap\"></fa-icon>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<button class=\"d-none\">\n\t\t\t\t<!-- fake button to allow for ngSubmit -->\n\t\t\t</button>\n\t\t</form>\n\t\t<div *ngIf=\"itemData?.added\" class=\"text-input\">\n\t\t\t<label>Added</label>\n\t\t\t<input disabled [ngModel]=\"itemData?.added\" />\n\t\t</div>\n\t\t<div class=\"button-container\">\n\t\t\t<button class=\"btn btn-danger\" *ngIf=\"itemData\" (click)=\"deleteItem()\">Delete</button>\n\t\t\t<button class=\"btn btn-secondary\" *ngIf=\"itemData && !itemData.isActive\" (click)=\"reactivate()\">Reactivate</button>\n\t\t</div>\n\t</div>\n</div>\n\n\n<!-- <mat-card class=\"item-card\">\n\n\t<div class=\"buttons-container\">\n\t\t<div class=\"flex-empty\"></div>\n\n\t\t<button class=\"action-button\" mat-fab color=\"accent\" (click)=\"back()\">\n\t\t\t<mat-icon>\n\t\t\t\tarrow_back\n\t\t\t</mat-icon>\n\t\t</button>\n\n\t\t<button class=\"action-button\" *ngIf=\"item && item.key && !item.completed\" mat-fab color=\"primary\" (click)=\"delete()\">\n\t\t\t<mat-icon>\n\t\t\t\tdelete\n\t\t\t</mat-icon>\n\t\t</button>\n\n\t\t<button class=\"action-button\" *ngIf=\"item && item.key && !item.completed\" mat-fab color=\"primary\" (click)=\"complete()\">\n\t\t\t<mat-icon>\n\t\t\t\tdone\n\t\t\t</mat-icon>\n\t\t</button>\n\n\t\t<button class=\"action-button\" *ngIf=\"!item || !item.completed\" mat-fab color=\"primary\" (click)=\"save()\">\n\t\t\t<mat-icon>\n\t\t\t\tsave\n\t\t\t</mat-icon>\n\t\t</button>\n\t</div>\n</mat-card> -->","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n\tproduction: false,\n\tfirebaseConfig: {\n\t\tapiKey: \"AIzaSyAjQ8JgwxsESsW0FTIL3HMmj7DSqTqkUP0\",\n\t\tauthDomain: \"despoiler-test.firebaseapp.com\",\n\t\tdatabaseURL: \"https://despoiler-test-default-rtdb.europe-west1.firebasedatabase.app\",\n\t\tprojectId: \"despoiler-test\",\n\t\tstorageBucket: \"despoiler-test.appspot.com\",\n\t\tmessagingSenderId: \"28456551983\",\n\t\tappId: \"1:28456551983:web:a1072e9103d21460ea28da\"\n\t}\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Injectable } from \"@angular/core\";\nimport { CanActivate, Router, UrlTree } from \"@angular/router\";\nimport { take } from \"rxjs/operators\";\nimport { AuthService } from \"./auth.service\";\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n\tconstructor(\n\t\tprivate auth: AuthService,\n\t\tprivate router: Router\n\t) {\n\t}\n\n\tasync canActivate(): Promise<boolean | UrlTree> {\n\t\tlet user = await this.auth.user.pipe(take(1)).toPromise();\n\t\tif (user)\n\t\t\treturn true;\n\t\treturn this.router.createUrlTree([\"/login\"]);\n\t}\n}","import { Component, OnInit } from \"@angular/core\";\nimport { FormControl, FormGroup } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport { AuthService } from \"../../shared/auth.service\";\nimport { BaseComponent } from \"../../shared/base.component\";\nimport { BusyService } from \"../../shared/busy.service\";\n\nclass LoginForm extends FormGroup {\n\tpublic get username(): FormControl { return this.controls.username as FormControl; }\n\tpublic get password(): FormControl { return this.controls.password as FormControl; }\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tusername: new FormControl(\"\"),\n\t\t\tpassword: new FormControl(\"\")\n\t\t});\n\t}\n}\n\n@Component({\n\tstyleUrls: [\"./login.component.scss\"],\n\ttemplateUrl: \"./login.component.html\"\n})\nexport class LoginComponent extends BaseComponent implements OnInit {\n\n\tpublic form: LoginForm;\n\n\tconstructor(\n\t\tprivate auth: AuthService,\n\t\tprivate router: Router,\n\t\tprivate busy: BusyService\n\t) {\n\t\tsuper();\n\t\tthis.form = new LoginForm();\n\t}\n\n\tngOnInit(): void {\n\t\tthis.subscriptions.push(this.auth.user.subscribe(u => {\n\t\t\tif (u) {\n\t\t\t\tthis.router.navigate([\"/\"]);\n\t\t\t}\n\t\t}));\n\t}\n\n\tlogin(): void {\n\t\tthis.busy.do(() => this.auth.login(this.form.username.value, this.form.password.value));\n\t}\n}","<form (ngSubmit)=\"login()\">\n\t<div class=\"text-input\">\n\t\t<label>Email</label>\n\t\t<input type=\"email\" [formControl]=\"form.username\" />\n\t</div>\n\t<div class=\"text-input\">\n\t\t<label>Password</label>\n\t\t<input type=\"password\" [formControl]=\"form.password\" />\n\t</div>\n\t<div class=\"button-container\">\n\t\t<button class=\"btn btn-primary\">\n\t\t\tLogin\n\t\t</button>\n\t</div>\n</form>","import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as dayjs from \"dayjs\";\nimport { Subscription } from \"rxjs\";\n\nexport interface ItemFormData {\n\tname: string;\n\texpires: string;\n}\n\nexport class ItemDetailForm extends FormGroup {\n\n\tprivate subscriptions: Subscription[];\n\n\tpublic get name(): FormControl { return this.controls[\"name\"] as FormControl; }\n\tpublic get expiresDate(): FormControl { return this.controls[\"expiresDate\"] as FormControl; }\n\tpublic get expiresInDays(): FormControl { return this.controls[\"expiresInDays\"] as FormControl; }\n\n\tconstructor() {\n\t\tlet group = new FormGroup({\n\t\t\t[\"name\"]: new FormControl(\"\", Validators.required),\n\t\t\t[\"expiresDate\"]: new FormControl(null, Validators.required),\n\t\t\t[\"expiresInDays\"]: new FormControl(null, Validators.required),\n\t\t});\n\n\t\tsuper(group.controls, group.validator, group.asyncValidator);\n\n\t\tthis.subscriptions = [];\n\t\tthis.subscriptions.push(this.expiresDate.valueChanges.subscribe(value => this.updateExpiresInDays(value)));\n\t\tthis.subscriptions.push(this.expiresInDays.valueChanges.subscribe(value => this.updateExpiresDate(value)));\n\t}\n\n\tpublic setData(value: ItemFormData): void {\n\t\tthis.setValue({\n\t\t\tname: value.name,\n\t\t\texpiresInDays: this.getNumberFromDate(value.expires),\n\t\t\texpiresDate: value.expires\n\t\t});\n\t}\n\tpublic getData(): ItemFormData {\n\t\treturn {\n\t\t\tname: this.name.value,\n\t\t\texpires: this.expiresDate.value\n\t\t};\n\t}\n\n\tpublic destroy(): void {\n\t\tfor (let sub of this.subscriptions) {\n\t\t\tsub.unsubscribe();\n\t\t}\n\t}\n\n\tprivate updateExpiresInDays(value: any): void {\n\t\tif (typeof value === \"string\" && /\\d{4}-\\d{2}-\\d{2}/.test(value)) {\n\t\t\tlet diff = this.getNumberFromDate(value);\n\t\t\tif (this.expiresInDays.value !== diff)\n\t\t\t\tthis.expiresInDays.setValue(diff);\n\t\t}\n\t}\n\n\tprivate updateExpiresDate(value: any): void {\n\t\tif (typeof value === \"number\") {\n\t\t\tlet date = this.getDateFromNumber(value);\n\t\t\tif (this.expiresDate.value !== date) {\n\t\t\t\tthis.expiresDate.setValue(date);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getDateFromNumber(num: number): string {\n\t\treturn dayjs().add(num, \"days\").format(\"YYYY-MM-DD\");\n\t}\n\n\tprivate getNumberFromDate(date: string): number {\n\t\tlet valDate = dayjs(date).startOf(\"day\");\n\t\tlet now = dayjs().startOf(\"day\");\n\t\tlet diff = Math.round(valDate.diff(now, \"days\"));\n\t\treturn diff;\n\t}\n}","import { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { AngularFireMessaging } from \"@angular/fire/messaging\";\nimport { FormControl } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport * as dayjs from \"dayjs\";\nimport { Observable, of } from \"rxjs\";\nimport { distinctUntilChanged, first, map, startWith, switchMap } from \"rxjs/operators\";\nimport { AuthService } from \"../../shared/auth.service\";\nimport { BaseComponent } from \"../../shared/base.component\";\nimport { BusyService } from \"../../shared/busy.service\";\nimport { DbService } from \"../../shared/db.service\";\nimport { IconService } from \"../../shared/icon.service\";\nimport { StorageKeys } from \"../../shared/storage-keys\";\n\nconst warningRatio = 0.6;\n\ntype SpoilState = \"ok\" | \"warning\" | \"spoiled\";\n\ninterface ListItem {\n\tkey: string;\n\tname: string;\n\tisActive: boolean;\n\tspoilState: SpoilState;\n\texpiresText?: string;\n\texpires: dayjs.Dayjs;\n}\n\n@Component({\n\tselector: \"app-item-list\",\n\ttemplateUrl: \"./item-list.component.html\",\n\tstyleUrls: [\"./item-list.component.scss\"]\n})\nexport class ItemListComponent extends BaseComponent implements OnInit, OnDestroy {\n\n\tpublic isMenuOpen = false;\n\tpublic activeOnlyControl: FormControl;\n\tpublic items: Observable<ListItem[]> = of();\n\n\tconstructor(\n\t\tpublic readonly icons: IconService,\n\t\tprivate messaging: AngularFireMessaging,\n\t\tprivate auth: AuthService,\n\t\tprivate router: Router,\n\t\tprivate busy: BusyService,\n\t\tprivate db: DbService\n\t) {\n\t\tsuper();\n\t\tthis.activeOnlyControl = new FormControl(localStorage.getItem(StorageKeys.showActiveOnly) === \"true\");\n\t}\n\n\tpublic ngOnInit(): void {\n\t\tif (this.isNotificationPermissionGranted()) {\n\t\t\t// try to get token if permission is granted\n\t\t\tthis.subscriptions.push(this.messaging.getToken.subscribe(token => this.updateToken(token)));\n\t\t}\n\n\t\tthis.subscriptions.push(this.activeOnlyControl.valueChanges.subscribe(value => {\n\t\t\tlocalStorage.setItem(StorageKeys.showActiveOnly, value ? \"true\" : \"false\");\n\t\t}));\n\n\t\tthis.items = this.activeOnlyControl.valueChanges.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tstartWith(this.activeOnlyControl.value),\n\t\t\tswitchMap(value => {\n\t\t\t\treturn this.db.getItems({ activeOnly: value }).snapshotChanges().pipe(\n\t\t\t\t\tmap(changes => changes.map(a => {\n\t\t\t\t\t\tlet item = a.payload.val()!;\n\t\t\t\t\t\tlet added = dayjs(item.added);\n\t\t\t\t\t\tlet expires = dayjs(item.expires);\n\t\t\t\t\t\tlet result: ListItem = {\n\t\t\t\t\t\t\tkey: a.payload.key!,\n\t\t\t\t\t\t\tname: item.name,\n\t\t\t\t\t\t\tisActive: item.isActive,\n\t\t\t\t\t\t\tspoilState: this.getSpoilState(added, expires),\n\t\t\t\t\t\t\texpiresText: this.getExpiresText(expires),\n\t\t\t\t\t\t\texpires\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t})));\n\t\t\t}),\n\t\t\tmap(list => list.sort((a, b) => {\n\t\t\t\tfunction getSpoilScore(item: ListItem): number {\n\t\t\t\t\tswitch (item.spoilState) {\n\t\t\t\t\t\tcase \"spoiled\": return 2;\n\t\t\t\t\t\tcase \"warning\": return 1;\n\t\t\t\t\t\tdefault: return 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet scoreA = getSpoilScore(a);\n\t\t\t\tlet scoreB = getSpoilScore(b);\n\t\t\t\tif (scoreA === scoreB)\n\t\t\t\t\treturn a.expires.diff(b.expires);\n\t\t\t\treturn scoreB - scoreA;\n\t\t\t}))\n\t\t);\n\t}\n\n\tpublic isNotificationPermissionGranted(): boolean { return Notification.permission === \"granted\"; }\n\tpublic async registerNotification(): Promise<void> {\n\t\tlet token = await this.messaging.requestToken.pipe(first()).toPromise();\n\t\tawait this.updateToken(token);\n\t}\n\n\tprivate async updateToken(token: string | null): Promise<void> {\n\t\tif (token !== null) {\n\t\t\tlet user = await this.auth.user.pipe(first()).toPromise();\n\t\t\tif (user) {\n\t\t\t\tthis.db.updateNotificationToken(token, user.uid);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tconsole.error(\"token is null\");\n\t\t}\n\t}\n\n\taddItem(): void {\n\t\tthis.router.navigate([\"/\", \"detail\"]);\n\t}\n\n\tasync signOut(): Promise<void> {\n\t\tawait this.busy.do(() => this.auth.logout());\n\t\tthis.router.navigate([\"/\", \"login\"]);\n\t}\n\n\ttoggleMenu(): void { this.isMenuOpen = !this.isMenuOpen; }\n\n\topenDetails(item: ListItem): void {\n\t\tthis.router.navigate([\"/\", \"detail\"], { queryParams: { key: item.key } });\n\t}\n\n\tasync markComplete(item: ListItem): Promise<void> {\n\t\tthis.db.getItems().update(item.key, { isActive: false });\n\t}\n\n\tprivate getSpoilState(added: dayjs.Dayjs, expires: dayjs.Dayjs): SpoilState {\n\t\tlet now = dayjs();\n\t\tif (expires.isBefore(now))\n\t\t\treturn \"spoiled\";\n\n\t\tlet totalLifetime = expires.diff(added);\n\t\tlet currentLifetime = now.diff(added);\n\t\tif (currentLifetime * 1.0 / totalLifetime > warningRatio)\n\t\t\treturn \"warning\";\n\n\t\treturn \"ok\";\n\t}\n\n\tprivate getExpiresText(expires: dayjs.Dayjs): string {\n\t\tlet days = this.getDaysUntil(expires);\n\t\tif (days === 0)\n\t\t\treturn \"OMG expires TODAY\";\n\t\tif (days > 0)\n\t\t\treturn `expires in ${days} days`;\n\t\treturn `expired ${-days} days ago`;\n\t}\n\n\tprivate getDaysUntil(date: dayjs.Dayjs): number {\n\t\tlet originalDate = dayjs(date).startOf(\"day\");\n\t\tlet now = dayjs().startOf(\"day\");\n\t\treturn originalDate.diff(now, \"day\");\n\t}\n}\n","<div class=\"page-wrapper\">\n\t<div class=\"page-header\">\n\t\t<div class=\"header-inner mod-menu-closed\" *ngIf=\"!isMenuOpen\">\n\t\t\t<button class=\"btn mod-btn-icon\" (click)=\"toggleMenu()\">\n\t\t\t\t<fa-icon [icon]=\"icons.menu\"></fa-icon>\n\t\t\t</button>\n\t\t\t<button class=\"btn mod-btn-icon add-icon\">\n\t\t\t\t<fa-icon [icon]=\"icons.add\" (click)=\"addItem()\"></fa-icon>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class=\"header-inner mod-menu-open\" *ngIf=\"isMenuOpen\">\n\t\t\t<div class=\"no-padding\">\n\t\t\t\t<button class=\"btn mod-btn-icon\" (click)=\"toggleMenu()\">\n\t\t\t\t\t<fa-icon [icon]=\"icons.close\"></fa-icon>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"checkbox\">\n\t\t\t\t<input id=\"activeOnly\" type=\"checkbox\" [formControl]=\"activeOnlyControl\">\n\t\t\t\t<label for=\"activeOnly\">Show active only</label>\n\t\t\t</div>\n\t\t\t<div class=\"header-item-bottom-margin\" *ngIf=\"isNotificationPermissionGranted() === false\">\n\t\t\t\t<button class=\"btn btn-light\" (click)=\"registerNotification()\">\n\t\t\t\t\tSubscribe to notifications\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button class=\"btn btn-light\" (click)=\"signOut()\">\n\t\t\t\t\t<fa-icon [icon]=\"icons.signOut\"></fa-icon>\n\t\t\t\t\tSign out\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=\"page-content\">\n\t\t<div class=\"list-item\" *ngFor=\"let item of (items | async)\">\n\t\t\t<div class=\"name\">\n\t\t\t\t<button class=\"btn\" (click)=\"openDetails(item)\">\n\t\t\t\t\t<span>{{item.name}}</span>\n\t\t\t\t\t<span *ngIf=\"item.expiresText\"> ({{item.expiresText}})</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"icon\">\n\t\t\t\t<fa-icon *ngIf=\"!item.isActive\" [icon]=\"icons.check\" class=\"icon-green\"></fa-icon>\n\t\t\t\t<fa-icon\n\t\t\t\t\t*ngIf=\"item.isActive && item.spoilState !== 'ok'\" [icon]=\"icons.warning\"\n\t\t\t\t\t[class.text-warning]=\"item.spoilState === 'warning'\"\n\t\t\t\t\t[class.text-danger]=\"item.spoilState === 'spoiled'\"></fa-icon>\n\t\t\t</div>\n\t\t\t<div *ngIf=\"item.isActive\" class=\"action\">\n\t\t\t\t<button class=\"btn mod-btn-icon\" (click)=\"markComplete(item)\">\n\t\t\t\t\t<fa-icon [icon]=\"icons.check\"></fa-icon>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n</div>","import { Injectable } from \"@angular/core\";\nimport { AngularFireAuth } from \"@angular/fire/auth\";\nimport auth from \"firebase\";\n\n@Injectable()\nexport class AuthService {\n\n\tprivate isPersistenceSet = false;\n\n\tpublic user = this.ngAuth.user;\n\n\tconstructor(\n\t\tprivate ngAuth: AngularFireAuth\n\t) {\n\n\t}\n\n\tasync login(username: string, password: string): Promise<auth.auth.UserCredential> {\n\t\tawait this.setPersistence();\n\t\treturn this.ngAuth.signInWithEmailAndPassword(username, password);\n\t}\n\n\tasync logout(): Promise<void> {\n\t\tawait this.setPersistence();\n\t\tawait this.ngAuth.signOut();\n\t}\n\n\tprivate async setPersistence(): Promise<void> {\n\t\tif (!this.isPersistenceSet) {\n\t\t\tawait this.ngAuth.setPersistence(auth.auth.Auth.Persistence.LOCAL);\n\t\t\tthis.isPersistenceSet = true;\n\t\t}\n\t}\n}","<div *ngIf=\"busy.isBusy | async\" class=\"progress-overlay\">\n\t<div class=\"progress\">\n\t\t<div class=\"progress-bar progress-bar-animated progress-bar-striped\"></div>\n\t</div>\n</div>\n\n<router-outlet></router-outlet>","import { Component } from \"@angular/core\";\nimport { BusyService } from \"./shared/busy.service\";\n\n@Component({\n\tselector: \"app-root\",\n\ttemplateUrl: \"./app.component.html\",\n\tstyleUrls: [\"./app.component.scss\"]\n})\nexport class AppComponent {\n\n\tconstructor(\n\t\tpublic readonly busy: BusyService\n\t) {\n\t}\n}\n","import { Injectable } from \"@angular/core\";\r\nimport { AngularFireDatabase, AngularFireList, AngularFireObject, QueryFn } from \"@angular/fire/database\";\r\n\r\nexport type WithKey<T> = T & {\r\n\tkey: string;\r\n};\r\n\r\nexport interface FoodItem {\r\n\tname: string;\r\n\tadded: string;\r\n\texpires: string;\r\n\tisActive: boolean;\r\n}\r\n\r\nexport interface UserInfo {\r\n\treadonly enabled: boolean;\r\n\tnotificationToken?: string;\r\n}\r\n\r\n@Injectable()\r\nexport class DbService {\r\n\tconstructor(private db: AngularFireDatabase) { }\r\n\r\n\tpublic getItems(filters?: { activeOnly?: boolean }): AngularFireList<FoodItem> {\r\n\t\tlet query: QueryFn | undefined = filters?.activeOnly ? ref => ref.orderByChild(\"isActive\").equalTo(true) : undefined;\r\n\t\treturn this.db.list(\"/items\", query);\r\n\t}\r\n\r\n\tpublic getItem(key: string): AngularFireObject<FoodItem> {\r\n\t\treturn this.db.object(`/items/${key}`);\r\n\t}\r\n\r\n\tpublic async createItem(data: FoodItem): Promise<string> {\r\n\t\tlet ref = await this.getItems().push(data);\r\n\t\treturn ref.key!;\r\n\t}\r\n\r\n\tpublic async updateNotificationToken(token: string, userId: string): Promise<void> {\r\n\t\tawait this.db.object<UserInfo>(`/users/${userId}`).update({\r\n\t\t\tnotificationToken: token\r\n\t\t});\r\n\t}\r\n}","import { Injectable } from \"@angular/core\";\r\nimport { faArrowLeft, faBars, faCheck, faExclamationTriangle, faPlus, faSave, faSignOutAlt, faSwatchbook, faSync, faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\n@Injectable()\r\nexport class IconService {\r\n\tpublic readonly menu = faBars;\r\n\tpublic readonly close = faTimes;\r\n\tpublic readonly signOut = faSignOutAlt;\r\n\tpublic readonly add = faPlus;\r\n\tpublic readonly check = faCheck;\r\n\tpublic readonly warning = faExclamationTriangle;\r\n\tpublic readonly back = faArrowLeft;\r\n\tpublic readonly save = faSave;\r\n\tpublic readonly swap = faSync;\r\n}","import { inject, NgModule } from \"@angular/core\";\nimport { AngularFireModule } from \"@angular/fire\";\nimport { AngularFireDatabaseModule } from \"@angular/fire/database\";\nimport { AngularFireMessagingModule, VAPID_KEY } from \"@angular/fire/messaging\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { FontAwesomeModule } from \"@fortawesome/angular-fontawesome\";\nimport { environment } from \"../environments/environment\";\nimport { AppRoutingModule } from \"./app-routing.module\";\nimport { AppComponent } from \"./app.component\";\nimport { ItemDetailComponent } from \"./pages/item-detail/item-detail.component\";\nimport { ItemListComponent } from \"./pages/item-list/item-list.component\";\nimport { LoginComponent } from \"./pages/login/login.component\";\nimport { AuthGuard } from \"./shared/auth.guard\";\nimport { AuthService } from \"./shared/auth.service\";\nimport { BusyService } from \"./shared/busy.service\";\nimport { DbService } from \"./shared/db.service\";\nimport { IconService } from \"./shared/icon.service\";\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tLoginComponent,\n\t\tItemListComponent,\n\t\tItemDetailComponent\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tFormsModule,\n\t\tFontAwesomeModule,\n\t\tReactiveFormsModule,\n\t\tAppRoutingModule,\n\t\tAngularFireModule.initializeApp(environment.firebaseConfig),\n\t\tAngularFireMessagingModule,\n\t\tAngularFireDatabaseModule\n\t],\n\tproviders: [\n\t\t{\n\t\t\tprovide: VAPID_KEY,\n\t\t\tuseValue: \"BLEKb-9jgQZdfFx8ZX91IRYlSXBUpS-QxeudB90y64CAHUUnHZ_7aRII9MsmV3sZXGY4jLEKSD466r_dVCmF_X4\"\n\t\t},\n\t\tAuthService,\n\t\tBusyService,\n\t\tIconService,\n\t\tAuthGuard,\n\t\tDbService\n\t],\n\tbootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from \"@angular/core\";\r\nimport { BehaviorSubject, Observable } from \"rxjs\";\r\nimport { distinctUntilChanged } from \"rxjs/operators\";\r\n\r\n@Injectable()\r\nexport class BusyService {\r\n\r\n\tpublic isBusy: Observable<boolean>;\r\n\tprivate _isBusy = new BehaviorSubject(false);\r\n\r\n\tprivate counter = 0;\r\n\r\n\tconstructor(\r\n\t) {\r\n\t\tthis.isBusy = this._isBusy.asObservable().pipe(distinctUntilChanged());\r\n\t}\r\n\r\n\tasync do<T>(block: () => Promise<T>): Promise<T> {\r\n\t\tthis.counter++;\r\n\t\tthis.updateValue();\r\n\t\tthis._isBusy.next(true);\r\n\t\ttry {\r\n\t\t\treturn await block();\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tthis.counter--;\r\n\t\t\tthis.updateValue();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateValue(): void {\r\n\t\tthis._isBusy.next(this.counter > 0);\r\n\t}\r\n}","import { Directive, Injectable, OnDestroy } from \"@angular/core\";\r\nimport { Subscription } from \"rxjs\";\r\n\r\n@Directive()\r\n// tslint:disable-next-line: directive-class-suffix\r\nexport abstract class BaseComponent implements OnDestroy {\r\n\tprotected subscriptions: Subscription[] = [];\r\n\r\n\tngOnDestroy(): void {\r\n\t\tthis.subscriptions.forEach(s => s.unsubscribe());\r\n\t}\r\n}","import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { ItemDetailComponent } from \"./pages/item-detail/item-detail.component\";\nimport { ItemListComponent } from \"./pages/item-list/item-list.component\";\nimport { LoginComponent } from \"./pages/login/login.component\";\nimport { AuthGuard } from \"./shared/auth.guard\";\n\nconst routes: Routes = [\n\t{ path: \"\", redirectTo: \"/list\", pathMatch: \"full\" },\n\t{ path: \"list\", component: ItemListComponent, canActivate: [AuthGuard] },\n\t{ path: \"detail\", component: ItemDetailComponent, canActivate: [AuthGuard] },\n\t{ path: \"login\", component: LoginComponent }\n];\n\n@NgModule({\n\timports: [RouterModule.forRoot(routes, { useHash: true })],\n\texports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","const prefix = \"despoiler.\";\r\n\r\nexport const StorageKeys = {\r\n\tshowActiveOnly: `${prefix}showActiveOnly`\r\n};","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}